<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Web application install - Threat Dragon</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Web application install | Threat Dragon</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Web application install" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="OWASP Threat Dragon, for threat modelling activities" /> <meta property="og:description" content="OWASP Threat Dragon, for threat modelling activities" /> <link rel="canonical" href="http://localhost:4000/install-webapp/" /> <meta property="og:url" content="http://localhost:4000/install-webapp/" /> <meta property="og:site_name" content="Threat Dragon" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Web application install" /> <script type="application/ld+json"> {"description":"OWASP Threat Dragon, for threat modelling activities","headline":"Web application install","url":"http://localhost:4000/install-webapp/","@type":"WebPage","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> Threat Dragon </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/about" class="nav-list-link">About</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/install/" class="nav-list-link">Install</a><ul class="nav-list "><li class="nav-list-item active"><a href="http://localhost:4000/install-webapp/" class="nav-list-link active">Web application install</a></li><li class="nav-list-item "><a href="http://localhost:4000/setup-env/" class="nav-list-link">Web app environment</a></li><li class="nav-list-item "><a href="http://localhost:4000/install-desktop/" class="nav-list-link">Desktop application install</a></li></ul></li><li class="nav-list-item"><a href="http://localhost:4000/getting-started/" class="nav-list-link">Getting started</a></li><li class="nav-list-item"><a href="http://localhost:4000/threat-model-diagrams/" class="nav-list-link">Threat model diagrams</a></li><li class="nav-list-item"><a href="http://localhost:4000/threat-generation/" class="nav-list-link">Threat generation</a></li><li class="nav-list-item"><a href="http://localhost:4000/api/" class="nav-list-link">Application interface</a></li><li class="nav-list-item"><a href="http://localhost:4000/cli/" class="nav-list-link">Command line interface</a></li><li class="nav-list-item"><a href="http://localhost:4000/contribute/" class="nav-list-link">Contributing</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="//threatdragon.org" class="site-button" target="_blank" rel="noopener noreferrer" > Try the web app </a> </li> <li class="aux-nav-list-item"> <a href="//github.com/OWASP/threat-dragon-desktop/releases" class="site-button" target="_blank" rel="noopener noreferrer" > Download the desktop app </a> </li> <li class="aux-nav-list-item"> <a href="//github.com/OWASP/threat-dragon" class="site-button" target="_blank" rel="noopener noreferrer" > Source code on GitHub </a> </li> <li class="aux-nav-list-item"> <a href="//owasp.org/www-project-threat-dragon" class="site-button" target="_blank" rel="noopener noreferrer" > OWASP project page </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/install/">Install</a></li> <li class="breadcrumb-nav-list-item"><span>Web application install</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h2 id="owasp-threat-dragon"> <a href="#owasp-threat-dragon" class="anchor-heading" aria-labelledby="owasp-threat-dragon"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a href="https://www.owasp.org">OWASP</a> Threat Dragon </h2> <p><a href="http://owasp.org/www-project-threat-dragon">Threat Dragon</a> comes in two variants, desktop application and web application.</p> <h2 id="web-application-install-instructions"> <a href="#web-application-install-instructions" class="anchor-heading" aria-labelledby="web-application-install-instructions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Web application install instructions </h2> <p>The web application can be run locally or from a server.</p> <h3 id="installing"> <a href="#installing" class="anchor-heading" aria-labelledby="installing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Installing </h3> <p>Threat Dragon is a Single Page Application (SPA) using Angular on the client and node.js on the server. To build and run locally follow these steps:</p> <p>Install git and node.js - which includes the node package manager npm. To get the code, navigate to where you want your code to be located and do</p> <p><code class="language-plaintext highlighter-rouge">git init</code></p> <p><code class="language-plaintext highlighter-rouge">git clone https://github.com/owasp/threat-dragon.git</code></p> <p>This installs code in two sub-folders. One for the main application (<code class="language-plaintext highlighter-rouge">td</code>) and one for the unit tests (<code class="language-plaintext highlighter-rouge">td.tests</code>). To install, do:</p> <p><code class="language-plaintext highlighter-rouge">npm install</code></p> <h3 id="environment-variables"> <a href="#environment-variables" class="anchor-heading" aria-labelledby="environment-variables"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Environment variables </h3> <p>Threat Dragon uses GitHub to store threat models, so you need to go to your GitHub account and <a href="https://github.com/settings/applications/new">register it as a GitHub application</a>. Once you have done that you need to set the Client ID and Client Secret as environment variables (<code class="language-plaintext highlighter-rouge">GITHUB_CLIENT_ID</code> and <code class="language-plaintext highlighter-rouge">GITHUB_CLIENT_SECRET</code>).</p> <p>You also need to set a session signing key environment variable (<code class="language-plaintext highlighter-rouge">SESSION_SIGNING_KEY</code>). Setting up these environment variables has caused some confusion in the past, so there is a <a href="setup-env.md">step-by-step guide</a> to this.</p> <p>Once a user is signed in, their session information contains an OAuth access token with write access to their GitHub repos. For security, this is encrypted before storage in the session. The session encryption supports multiple keys so that they can be expired without any interruption to the running application. The primary key is always used for encryption. Retired keys can be kept available for decrypting existing sessions. Once all sessions are using the new primary key (typically this will be around 60 minutes maximum), the old one can be safely removed. The keys are stored as a JSON string in the <code class="language-plaintext highlighter-rouge">SESSION_ENCRYPTION_KEYS</code> environment variable. For example:</p> <p><code class="language-plaintext highlighter-rouge">[{\"isPrimary\": true, \"id\": 0, \"value\": \"abcdef\"}, {\"isPrimary\": false, \"id\": 1, \"value\": \"ghijkl\"}]</code></p> <p>If you are developing locally, you can choose to store the session data in memory using the express-session in-memory store. To do this the <code class="language-plaintext highlighter-rouge">SESSION_STORE</code>environment variale to <code class="language-plaintext highlighter-rouge">local</code>. As <a href="https://github.com/expressjs/session">mentioned in the express-session docs</a> this is for development only - it is not suitable for production. To remind you of this, Threat Dragon will write a log message at severity ERROR when it starts if the in memory session store is used.</p> <p>For production use, Threat Dragon currently supports Azure Table Storage for the session store via <a href="https://www.npmjs.com/package/connect-azuretables">connect-azuretables</a>. To make this store work you need to specify an Azure Storage Account and key as environment variables <code class="language-plaintext highlighter-rouge">AZURE_STORAGE_ACCOUNT</code> and <code class="language-plaintext highlighter-rouge">AZURE_STORAGE_ACCESS_KEY</code>. See the <a href="https://www.npmjs.com/package/connect-azuretables">connect-azuretables</a> documentation for more options.</p> <p>If you want to use an <a href="https://github.com/expressjs/session#compatible-session-stores">alternative session store</a> in production, install it and edit the <a href="https://github.com/owasp/threat-dragon/blob/master/td/config/session.config.js">session.config.js</a> file.</p> <p>Lastly, by default, Threat Dragon will set the <code class="language-plaintext highlighter-rouge">secure</code> flag on cookies. To override this for development purposes, set the <code class="language-plaintext highlighter-rouge">NODE_ENV</code> environment variable to <code class="language-plaintext highlighter-rouge">development</code>.</p> <h3 id="running-the-application"> <a href="#running-the-application" class="anchor-heading" aria-labelledby="running-the-application"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Running the application </h3> <p>Once your environment variables are set up, start the node web server:</p> <p><code class="language-plaintext highlighter-rouge">npm start</code></p> <p>If you then browse to <code class="language-plaintext highlighter-rouge">http://localhost:3000</code> you should see the running application.</p> </div> </div> </div> </body> </html>
